<%= form_for @project, :html => { :class => 'form-horizontal' } do |f| %>
  <fieldset>
    <div class="control-group">
      <%= f.label :name, :class => 'control-label' %>
      <div class="controls">
        <%= f.text_field :name, :class => 'text_field' %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :slug, :class => 'control-label' %>
      <div class="controls">
        <%= f.text_field :slug, :class => 'text_field' %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :color, :class => 'control-label' %>
      <div class="controls">
        <%= f.select :color, %w{teal orange slate blue green red}, :class => 'select_field' %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :git_url, "Git URL", :class => 'control-label' %>
      <div class="controls">
        <%= f.text_field :git_url, :class => 'text_field' %>
      </div>
    </div>
    
    <hr />

    <div class="control-group">
      <%= f.label :unfuddle_id, :class => 'control-label' %>
      <div class="controls">
        <%= f.number_field :unfuddle_id, :class => 'number_field' %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :kanban_field, :class => 'control-label' %>
      <div class="controls">
        <%= f.text_field :kanban_field, :class => 'text_field' %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :development_id, :class => 'control-label' %>
      <div class="controls">
        <%= f.number_field :development_id, :class => 'number_field' %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :testing_id, :class => 'control-label' %>
      <div class="controls">
        <%= f.number_field :testing_id, :class => 'number_field' %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :production_id, :class => 'control-label' %>
      <div class="controls">
        <%= f.number_field :production_id, :class => 'number_field' %>
      </div>
    </div>
        
    <hr />
    
    <%# !todo: warn before deleting an environment %>
    <div class="control-group">
      <%= f.label :environments, :class => 'control-label' %>
      <div class="controls changes-nested-editor">
        <div class="nested editor headings">
          <ol>
            <li>
              <div class="environment-name">Environment Name<small>&nbsp;</small></div>
              <div class="environment-slug">Git Branch<small>May be a URL or local path</small></div>
              <div class="environment-initial-commit">Initial Commit (SHA)<small>Leave blank for first commit</small></div>
            </li>
          </ol>
        </div>
        <%= f.nested_editor_for :environments do |f| -%>
          <div class="environment-name"><%= f.text_field :name %></div>
          <div class="environment-slug"><%= f.text_field :slug %></div>
          <div class="environment-initial-commit"><%= f.text_field :initial_commit %></div>
        <% end -%>
      </div>
    </div>

    <div class="form-actions">
      <%= f.submit nil, :class => 'btn btn-primary' %>
      <%= link_to 'Cancel', projects_path, :class => 'btn' %>
      <%= link_to 'Delete', project_path(@project), :method => 'delete', :confirm => 'Are you sure?', :class => 'btn btn-danger btn-delete' if @project.persisted? && can?(:destroy, @project) %>
    </div>
  </fieldset>
<% end %>
