<h1 class="space-below">
  Users
  <%= link_to "New User", new_user_path, :class => "btn btn-primary" if can?(:create, User) %>
</h1>

<% if @users.any? %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
      <% if can?(:update, User) %>
        <th>Actions</th>
      <% end %>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td><%= link_to user.name, user_path(user) %></td>
          <td><%= mail_to user.email, user.email %></td>
          <td><%= user.role %></td>
        <% if can?(:update, user) %>
          <td><%= link_to "Edit", edit_user_path(user), :class => "btn btn-mini" %></td>
        <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No users have been created yet.</p>
<% end %>
